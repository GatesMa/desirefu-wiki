# 压测报告

在加入了ES缓存之后，我们把之前两个最慢的两个接口切换到从DB查ES，并做接口压测：

（1）入队申请查询接口

**/desire\_fu/v1/organize\_application/select\_scroll（查询申请）**

| **线程数量** | **\#Samples** | **Average** | **Median** | **90%Line** | **95%Line** | **99%Line** | **Min** | **Max** | **Error%** |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 10 | 3000 | 1064 | 1057 | 1190 | 1268 | 1316 | 848 | 2124 | 0.00 |
| 20 | 14000 | 1094 | 1079 | 1249 | 1277 | 1391 | 817 | 2374 | 0.00 |
| 30 | 3000 | 1378 | 1338 | 1741 | 1892 | 2270 | 850 | 3681 | 0.00 |
| 40 | 2000 | 2066 | 1808 | 3056 | 3510 | 5754 | 850 | 19534 | 0.00 |

查询入队申请的接口，之前10的qps时就出现了少量错误，整体能承受的qps只有5，而现在加了缓存后的接口在40时依旧没有出现错误，只有返回时间长了一点，整体承受qps可以达到25，不在意时长的话，四五十也没有压力，提升效率至少500%

（2）学生账号查询接口

**/desire\_fu/v1/normal\_account/get（查询学生账号）**

| **线程数量** | **\#Samples** | **Average** | **Median** | **90%Line** | **95%Line** | **99%Line** | **Min** | **Max** | **Error%** |
| :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- | :--- |
| 20 | 3000 | 600 | 550 | 987 | 1103 | 2301 | 218 | 4695 | 0.00 |
| 40 | 5000 | 824 | 923 | 2687 | 3274 | 6952 | 290 | 10010 | 0.00 |
| 60 | 5000 | 1101 | 983 | 3132 | 3386 | 7031 | 301 | 8935 | 0.03 |

之前查询学生账号的接口在40的qps时就出现了少量错误，而现在加了缓存后的接口在60时才出现少量错误，整体承受qps可以达到50左右，提升效率在67%

