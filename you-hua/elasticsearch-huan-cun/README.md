# ElasticSearch缓存

Desirefu后端服务使用人数多的情况下，请求大量增加。将会面临下面的挑战：

（1）DB压力大。一些接口的业务还算复杂，比如队伍查询接口涉及很多张表，涉及四五张，一次请求多次查询数据库，请求耗时就会很大。

（2）没有外键。我们并没有使用外键约束，而是采用程序的控制保证数据一致性，也没有使用join等复杂的查询语句。

（3）单数据源。请求直接查DB，DB挂了，没有降级数据，对业务方影响较大。

使用缓存可以很好的解决访问DB的问题，但是也会相应的带来一些问题，比如数据一致性问题。使用ES作为缓存的好处：1. 文档存储，避免查询很多张表。2. 较DB耗时少。3. 支持复杂的查询（模糊查询、聚合查询等）

![](../../.gitbook/assets/image%20%2874%29.png)

Kibana配合ES：

![](../../.gitbook/assets/image%20%2892%29.png)

