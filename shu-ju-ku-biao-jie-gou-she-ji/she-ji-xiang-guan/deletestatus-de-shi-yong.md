---
description: 为什么使用DeleteStatus来标记删除，而不是直接删除数据
---

# DeleteStatus的使用

在所有的表中，都无一例外的添加了DeleteStatus字段，如果删除一条数据，就修改这个字段即可，在程序中，查询的时候，我们不去查询删除状态的记录。真删：指的就是 彻底地删除，从数据库表内将数据进行移除 delete 。假删：指的就是逻辑上的删除 ，数据库表内，数据会包含一个标识flag字段 ，例如：status（删除标识，0代表未删除，1代表删除，默认为0），执行假删时，只是将数据的删除标识 DeleteStatus从 0 改 1，update。原因有以下几条：

#### （1）性能问题

可以参考[文章](https://blog.csdn.net/qq_32062699/article/details/112346818)。“MySQL内部不会真正删除空间，而且做标记删除，即将delflag:N修改为delflag:Y，commit之后会会被purge进入删除链表，如果下一次insert更大的记录，delete之后的空间不会被重用，如果插入的记录小于等于delete的记录空会被重用。对普通的大表，想要通过delete数据来对表进行瘦身是不现实的，所以在任何时候不要用delete去删除数据，应该使用优雅的标记删除。“。文章里有详细的数据说明。

#### （2）索引问题

大量删除触发索引重建，而现在数据库空间不值钱，索引占有的空间无伤大雅没，但是索引重建一次卡的 cpu 和 io 很重要。

#### （3）数据问题

数据删除后就没有里，但是对于实际开发运营来说，我们对于已经删除的数据，可以导出然后做一些数据分析，用来分析用户的行为等，也是很有研究价值的。我们数据不做物理删除，也是为了以后能更好的勾勒出用户在本站的信息图谱（包括爱好，住址，曾发布，浏览历史等等），有利于我们分析用户行为的数据都不要做物理删除。所以，实际开发我们都是用update替代delete。

